@model Forum_Project.ViewModels.ThreadViewModel


<head>
    <link rel="stylesheet" href="~/css/home-styles.css" />
</head>

<div class="container my-3">
    <div class="row">
        <div class="col-12">
            <div class="category mb-0 p-4 rounded-top text-light">
                <h2 class="h4">
                    @Model.ThreadTitle Thread Title
                </h2>
            </div>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="thead-light">
                <tr>
                    <th scope="col" class="forum-col">Thread</th>
                    <th scope="col" class="last-post-col">Details</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <p class="mb-0">@Model.Subject</p>
                    </td>
                    <td>
                        <div>by <a href="#">@Model.AuthorName</a></div>
                        <div>@Model.PostedOn</div>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
</div>
@{

    async Task DisplayPosts(TreeExtensions.ITree<Posts> post, string indent, Boolean last)
    {

        <td colspan="12">

            <div class="card card-body">
                @post.Data.Message
            </div>

            @for (int i = 0; i < post.Children.Count; i++)
            {
                <table class="table" style="border-collapse: collapse">
                    <tbody>
                        <tr>
                            @{await DisplayPosts(post.Children.ToList()[i], indent, 0 == post.Children.Count);}
                        </tr>
                    </tbody>
                </table>

            }
        </td>
    }
}

<table class="table" style="border-collapse: collapse">

    @{
        for (int i = 0; i < Model.Posts.Count; i++)
        {
            <tbody>
                <tr>
                    @{await DisplayPosts(Model.Posts[i], "", false);}
                </tr>
            </tbody>
        }
    }

</table>
<script type="text/javascript">



</script>
