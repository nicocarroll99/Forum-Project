@model List<Forum_Project.ViewModels.ForumViewModel>

@{
    ViewData["Title"] = "Home Page";
}

@inject SignInManager<ApplicationUser> signInManager;

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <link rel="stylesheet" href="~/css/home-styles.css" />
    <title>Home</title>
</head>

<body>
    <div class="container my-3">

        <div class="mb-3">
            <form method="post">
                @if (signInManager.IsSignedIn(User))
                {
                    @if (User.IsInRole("Admin"))
                    {
                        <button asp-action="Initialize" asp-controller="Home" type="submit" class="btn btn-primary" style="width:auto">Switch to User</button>
                    }
                    else
                    {
                        <button asp-action="Initialize" asp-controller="Home" type="submit" class="btn btn-primary" style="width:auto">Switch to Admin</button>
                    }
                }
            </form>
        </div>

        <nav class="breadcrumb">
            <h6 class="breadcrumb-item active">Index</h6>
        </nav>

        <a class="btn btn-primary mb-3" asp-action="AddForum" asp-controller="Forum">Add Forum</a>

        @for (int i = 0; i < Model.Count; i++)
        {
            <div class="row">
                <div class="col-12 col-xl-9">
                    <div class="category mb-0 p-4 rounded-top text-light">
                        <h2 class="h4">
                            @Model[i].ForumName
                            <a class="btn btn-primary float-right" asp-action="AddThread" asp-controller="Forum" asp-route-forumId="@Model[i].ForumId">Add Thread</a>
                        </h2>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col" class="forum-col">Threads</th>
                                    <th scope="col">Topics</th>
                                    <th scope="col">Post</th>
                                    <th scope="col" class="last-post-col">Details</th>

                                </tr>
                            </thead>
                            <tbody>
                                @for (int j = 0; j < Model[i].Threads.Count; j++)
                                {
                                    <tr>
                                        <td>
                                            <h3 class="h5 mb-0">
                                                <a>@Html.ActionLink(Model[i].Threads[j].ThreadTitle, "ThreadPosts", "Forum", new { threadId = Model[i].Threads[j].ThreadId })</a>
                                            </h3>
                                            <p class="mb-0">@Model[i].Threads[j].Subject</p>
                                        </td>
                                        <td>
                                            <div>9</div>
                                        </td>
                                        <td>30</td>
                                        <td>
                                            <div>by <a href="#">@Model[i].Threads[j].AuthorName</a></div>
                                            <div>@Model[i].Threads[j].PostedOn</div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }
    </div>
</body>