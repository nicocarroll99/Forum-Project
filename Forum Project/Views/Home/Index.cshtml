@model List<Forum_Project.ViewModels.ForumViewModel>

@{
    ViewData["Title"] = "Home Page";
}

@inject SignInManager<ApplicationUser> signInManager;

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="~/css/home-styles.css" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Home</title>
</head>

<body>
    <!-- Buttons for adding a forum and switching role -->
    <div>
        <a class="btn btn-primary" asp-action="AddForum" asp-controller="Forum">Add Forum</a>

        <form method="post">
            @if (signInManager.IsSignedIn(User))
            {
                @if (User.IsInRole("Admin"))
                {
                    <button asp-action="Initialize" asp-controller="Home" type="submit" class="btn btn-primary" style="width:auto">Switch to User</button>
                }
                else
                {
                    <button asp-action="Initialize" asp-controller="Home" type="submit" class="btn btn-primary" style="width:auto">Switch to Admin</button>
                }
            }
        </form>
    </div>
    <!---------------------------------------------------->
    <div class="container my-3">
        <nav class="breadcrumb">
            <h6 class="breadcrumb-item active">Index</h6>
        </nav>
        @for (int i = 0; i < Model.Count; i++)
        {
            <div class="row">
                <div class="col-12 col-xl-9">
                    <h2 class="h4 category mb-0 p-4 rounded-top text-light">@Model[i].ForumName</h2>
                    <a class="btn btn-primary" asp-action="AddThread" asp-controller="Forum" asp-route-forumId="@Model[i].ForumId">Add Thread</a>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col" class="forum-col">Threads</th>
                                    <th scope="col">Topics</th>
                                    <th scope="col">Post</th>
                                    <th scope="col" class="last-post-col">Last Post</th>

                                </tr>
                            </thead>
                            <tbody>
                                @for (int j = 0; j < Model[i].Threads.Count; j++)
                                {
                                    <tr>
                                        <td>
                                            <h3 class="h5 mb-0"><a href="#">@Model[i].Threads[j].ThreadTitle</a></h3>
                                            <p class="mb-0">@Model[i].Threads[j].Subject</p>
                                        </td>
                                        <td>
                                            <div>9</div>
                                        </td>
                                        <td>30</td>
                                        <td>
                                            <h4 class="h6 mb-0"> <a href="#">Post Name</a></h4>
                                            <div>by <a href="#">Author Name</a></div>
                                            <div>11 Nov 2020, 17:11</div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }
    </div>

    <!-- Optional JavaScript; choose one of the two! -->
    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</body>